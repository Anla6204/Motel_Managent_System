<Page x:Class="AnLaNPWPF.Views.RoomManagementView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:AnLaNPWPF.Views"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="Room Management">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <TextBlock Text="ðŸ  QUáº¢N LÃ PHÃ’NG TRá»Œ" 
                   FontSize="28" 
                   FontWeight="Bold" 
                   Foreground="#2c3e50"
                   HorizontalAlignment="Center"
                   Margin="0,0,0,20"/>
        
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,20" HorizontalAlignment="Center">
            <TextBox x:Name="SearchBox" Width="250" Height="35" Margin="0,0,15,0" 
                     VerticalContentAlignment="Center" Padding="10,0"
                     Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                     FontSize="14" ToolTip="TÃ¬m kiáº¿m theo sá»‘ phÃ²ng hoáº·c khÃ¡ch hÃ ng"/>
            
            <ComboBox x:Name="StatusFilterComboBox" Width="150" Height="35" Margin="0,0,15,0"
                      VerticalContentAlignment="Center" FontSize="14"
                      SelectedValue="{Binding SelectedStatusFilter, UpdateSourceTrigger=PropertyChanged}"
                      SelectedValuePath="Tag"
                      ToolTip="Lá»c theo tráº¡ng thÃ¡i phÃ²ng">
                <ComboBoxItem Content="ðŸ” Táº¥t cáº£" Tag="-1"/>
                <ComboBoxItem Content="ðŸ  Sáºµn sÃ ng thuÃª" Tag="0"/>
                <ComboBoxItem Content="ðŸ¡ Äang Ä‘Æ°á»£c thuÃª" Tag="1"/>
                <ComboBoxItem Content="ðŸ”§ Báº£o trÃ¬" Tag="2"/>
            </ComboBox>
            
            <Button Content="ðŸ” TÃ¬m kiáº¿m" Command="{Binding SearchCommand}" 
                    Width="100" Height="35" Margin="0,0,10,0"
                    Background="#3498db" Foreground="White" BorderThickness="0"/>
            <Button Content="ðŸ”„ LÃ m má»›i" Command="{Binding RefreshCommand}" 
                    Width="100" Height="35" Margin="0,0,10,0"
                    Background="#9b59b6" Foreground="White" BorderThickness="0"/>
            <Button Content="ðŸ“Š Xuáº¥t Excel" Command="{Binding ExportExcelCommand}" 
                    Width="120" Height="35" Margin="0,0,10,0"
                    Background="#e67e22" Foreground="White" BorderThickness="0"/>
            <Button Content="âž• ThÃªm phÃ²ng" Command="{Binding AddCommand}" 
                    Width="120" Height="35" Margin="0,0,10,0"
                    Background="#27ae60" Foreground="White" BorderThickness="0"/>
            <Button Content="ðŸ‘ï¸ Chi tiáº¿t" Command="{Binding ViewDetailCommand}" 
                    Width="100" Height="35"
                    Background="#17a2b8" Foreground="White" BorderThickness="0"/>
        </StackPanel>
        
        <DataGrid Grid.Row="2" 
                  ItemsSource="{Binding Rooms}" 
                  AutoGenerateColumns="False" 
                  IsReadOnly="True"
                  SelectionMode="Single"
                  SelectedItem="{Binding SelectedRoom}"
                  AlternatingRowBackground="#f9f9f9"
                  RowHeight="45"
                  FontSize="14"
                  GridLinesVisibility="Horizontal"
                  HeadersVisibility="Column">
            <DataGrid.Columns>
                <DataGridTextColumn Header="PhÃ²ng sá»‘" Binding="{Binding RoomNumber}" Width="100"/>
                <DataGridTextColumn Header="Loáº¡i phÃ²ng" Binding="{Binding RoomTypes.RoomTypeName}" Width="120"/>
                <DataGridTextColumn Header="Tráº¡ng thÃ¡i phÃ²ng" Binding="{Binding RoomStatusDisplay}" Width="130"/>
                <DataGridTextColumn Header="TÃ¬nh tráº¡ng" Binding="{Binding RoomStatusText}" Width="130"/>
                <DataGridTextColumn Header="KhÃ¡ch hÃ ng" Binding="{Binding CustomerInfo}" Width="180"/>
                <DataGridTextColumn Header="GiÃ¡/thÃ¡ng" Binding="{Binding RoomPricePerMonth, StringFormat={}{0:N0} VNÄ}" Width="120"/>
                <DataGridTextColumn Header="Sá»©c chá»©a" Binding="{Binding OccupancyInfo}" Width="100"/>
                <DataGridTextColumn Header="MÃ´ táº£" Binding="{Binding RoomDetailDescription}" Width="*"/>
                <DataGridTemplateColumn Header="Thao tÃ¡c" Width="200">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <Button Content="âœï¸ Sá»­a" Margin="5,2" 
                                        Command="{Binding DataContext.EditCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}" 
                                        CommandParameter="{Binding}" Width="60" Height="30"
                                        Background="#f39c12" Foreground="White" BorderThickness="0"/>
                                <Button Content="ðŸ—‘ï¸ XÃ³a" Margin="5,2" 
                                        Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}" 
                                        CommandParameter="{Binding}" Width="60" Height="30"
                                        Background="#e74c3c" Foreground="White" BorderThickness="0"/>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Page> 